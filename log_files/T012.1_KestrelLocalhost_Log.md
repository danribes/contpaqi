# T012.1 Configure Kestrel to Listen on 127.0.0.1:5000 Only - Implementation Log

## Overview
Configured Kestrel web server to only accept connections from localhost for security.

## Files Modified
- `windows-bridge/src/ContpaqiBridge/Program.cs`

## Implementation Details

### Kestrel Configuration
```csharp
var builder = WebApplication.CreateBuilder(args);

// Configure Kestrel to listen on localhost only (security requirement)
builder.WebHost.ConfigureKestrel(options =>
{
    options.ListenLocalhost(5000);
});
```

### Why Localhost Only?
The Windows Bridge handles sensitive accounting operations:
1. Creates journal entries in ContPAQi
2. Has direct access to SDK and database
3. Should only accept requests from the local Electron app
4. Network exposure would be a security risk

### Alternative Configurations
```csharp
// Listen on specific IP (also secure)
options.Listen(IPAddress.Parse("127.0.0.1"), 5000);

// Listen on all interfaces (NOT SECURE for this use case)
// options.ListenAny(5000);  // DO NOT USE

// Listen on specific interface with HTTPS
// options.ListenLocalhost(5001, opts => opts.UseHttps());
```

### Network Binding Result
```
Listening on: http://127.0.0.1:5000
NOT listening on: http://0.0.0.0:5000
NOT listening on: http://[::]:5000
```

## Verification
- Only localhost can connect
- External network requests are refused at OS level
- Provides first layer of defense
