# T011.1 Create JobQueueService as IHostedService - Implementation Log

## Overview
Created JobQueueService as a BackgroundService (IHostedService) for processing invoice jobs in the background.

## Files Created/Modified
- `windows-bridge/src/ContpaqiBridge/Services/JobQueueService.cs`

## Implementation Details

### Class Definition
```csharp
public class JobQueueService : BackgroundService
{
    private readonly ILogger<JobQueueService> _logger;
    private readonly ISdkInterop _sdk;
    private readonly IConfiguration _config;

    public JobQueueService(
        ISdkInterop sdk,
        IConfiguration config,
        ILogger<JobQueueService> logger)
    {
        _sdk = sdk;
        _config = config;
        _logger = logger;
    }

    protected override async Task ExecuteAsync(CancellationToken stoppingToken)
    {
        _logger.LogInformation("JobQueueService starting");
        // Processing loop
    }
}
```

### Registration in Program.cs
```csharp
// Register as singleton for EnqueueAsync access
builder.Services.AddSingleton<JobQueueService>();

// Also register as hosted service
builder.Services.AddHostedService(sp => sp.GetRequiredService<JobQueueService>());
```

### BackgroundService Lifecycle
1. **StartAsync** - Called when application starts
2. **ExecuteAsync** - Main background loop
3. **StopAsync** - Called when application stops

## Key Design Decisions
- Singleton registration allows controller access
- BackgroundService for managed lifecycle
- ILogger for structured logging
- IConfiguration for SDK settings

## Benefits
- Automatic start/stop with application
- Dependency injection support
- Graceful shutdown handling
