<!--
  ContPAQi AI Bridge - Download Button (Vanilla HTML/JS)
  Copy this into your HTML page for a simple download button that
  automatically fetches the latest version from download.json
-->

<!-- Download Section -->
<div id="download-section" class="text-center py-8">
  <a
    id="download-btn"
    href="https://github.com/danribes/contpaqi/releases/latest"
    class="inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-lg text-lg font-semibold transition-colors shadow-lg"
  >
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
      <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/>
    </svg>
    <span id="download-text">Descargar</span>
  </a>

  <p id="download-info" class="text-sm text-gray-500 mt-2">
    Windows Installer
  </p>

  <a
    id="release-link"
    href="https://github.com/danribes/contpaqi/releases/latest"
    target="_blank"
    rel="noopener noreferrer"
    class="text-sm text-blue-600 hover:text-blue-800 hover:underline mt-2 inline-block"
  >
    Ver notas de la versión →
  </a>
</div>

<!-- Requirements Box (optional) -->
<div id="requirements-box" class="mt-4 p-4 bg-gray-100 rounded-lg text-sm max-w-md mx-auto">
  <h4 class="font-semibold mb-2">Requisitos del Sistema:</h4>
  <ul class="list-disc list-inside text-gray-600">
    <li id="req-os">Windows 10/11 (64-bit)</li>
    <li id="req-docker">Docker Desktop</li>
    <li id="req-dotnet">.NET 6.0 Runtime</li>
  </ul>
</div>

<script>
  // Fetch download configuration and update the UI
  (function() {
    fetch('/config/download.json')
      .then(response => response.json())
      .then(config => {
        // Update download button
        const downloadBtn = document.getElementById('download-btn');
        const downloadText = document.getElementById('download-text');
        const downloadInfo = document.getElementById('download-info');
        const releaseLink = document.getElementById('release-link');

        if (downloadBtn) {
          downloadBtn.href = config.downloadUrl;
        }

        if (downloadText) {
          downloadText.textContent = `Descargar v${config.version}`;
        }

        if (downloadInfo) {
          downloadInfo.textContent = `${config.fileName} • Windows Installer`;
        }

        if (releaseLink) {
          releaseLink.href = config.releaseUrl;
        }

        // Update requirements if present
        const reqOs = document.getElementById('req-os');
        const reqDocker = document.getElementById('req-docker');
        const reqDotnet = document.getElementById('req-dotnet');

        if (config.requirements) {
          if (reqOs) reqOs.textContent = config.requirements.os;
          if (reqDocker) reqDocker.textContent = config.requirements.docker;
          if (reqDotnet) reqDotnet.textContent = config.requirements.dotnet;
        }
      })
      .catch(error => {
        console.error('Error loading download config:', error);
        // Keep fallback URLs
      });
  })();
</script>

<!--
  Tailwind CSS classes used (include Tailwind or replace with your CSS):
  - text-center, py-8, mt-2, mt-4, p-4, max-w-md, mx-auto
  - inline-flex, items-center, gap-2
  - bg-blue-600, hover:bg-blue-700, bg-gray-100
  - text-white, text-gray-500, text-gray-600, text-blue-600, hover:text-blue-800
  - px-8, py-4, rounded-lg, text-lg, text-sm
  - font-semibold, shadow-lg, transition-colors
  - list-disc, list-inside, inline-block, hover:underline
  - h-5, w-5
-->
