# T005.2 Tesseract Wrapper - Learning Guide

## Overview
This guide explains how to configure Tesseract OCR for Spanish invoice processing.

## Tesseract Configuration

### OEM (OCR Engine Mode)
| Mode | Description |
|------|-------------|
| 0 | Legacy engine only |
| 1 | Neural nets LSTM only |
| 2 | Legacy + LSTM |
| **3** | Default (best available) |

We use OEM 3 for best accuracy.

### PSM (Page Segmentation Mode)
| Mode | Description |
|------|-------------|
| 0 | OSD only |
| 1 | Auto with OSD |
| 3 | Auto (default) |
| **6** | Assume single uniform block |
| 11 | Sparse text |

We use PSM 6 for invoice sections (uniform text blocks).

## Language Support

### Mixed Language Configuration
```python
lang = 'spa+eng'  # Spanish primary, English secondary
```

Why both?
- Invoice headers often in Spanish: "Factura", "Total", "RFC"
- Some content may be English: product names, codes
- Tesseract processes both simultaneously

### Language Verification
```python
def __init__(self, lang='spa+eng', verify_languages=True):
    if verify_languages:
        available = pytesseract.get_languages()
        for l in lang.split('+'):
            if l not in available:
                raise RuntimeError(f"Install tesseract-ocr-{l}")
```

## Configuration String
```python
config = '--oem 3 --psm 6'
```

Pass to Tesseract:
```python
pytesseract.image_to_string(image, lang=lang, config=config)
```

## Best Practices

1. **Verify languages on init** - Fail fast with clear error
2. **Use OEM 3** - Best accuracy with LSTM
3. **Choose PSM based on content** - PSM 6 for uniform blocks
4. **Mix languages** - Better recognition for mixed content
