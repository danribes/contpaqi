# T005.1 OCR Module Structure - Learning Guide

## Overview
This guide explains the OCR module structure for extracting text from invoice images using Tesseract OCR.

## What is OCR?
**Optical Character Recognition (OCR)** converts images of text into machine-readable text. Tesseract is an open-source OCR engine maintained by Google.

## OCRWord Dataclass

A dataclass to represent a single extracted word:

```python
@dataclass
class OCRWord:
    text: str           # The word itself
    confidence: float   # How sure OCR is (0.0-1.0)
    bbox: tuple         # Position (x1, y1, x2, y2)
```

### Bounding Box Format
```
(x1, y1) ─────────────┐
    │                 │
    │     "Total"     │
    │                 │
    └─────────────── (x2, y2)
```

## OCREngine Class

The main class for OCR operations:

```python
class OCREngine:
    DEFAULT_LANG = 'spa+eng'      # Spanish + English
    DEFAULT_CONFIG = '--oem 3 --psm 6'
```

### Key Methods
| Method | Returns | Description |
|--------|---------|-------------|
| `extract_text()` | `str` | Plain text from image |
| `extract_words()` | `List[OCRWord]` | Words with positions |

## Why Dataclasses?

Python dataclasses provide:
- Automatic `__init__`, `__repr__`, `__eq__`
- Type hints for documentation
- `__post_init__` for validation
- Less boilerplate code

```python
# Without dataclass (verbose)
class OCRWord:
    def __init__(self, text, confidence, bbox):
        self.text = text
        self.confidence = confidence
        self.bbox = bbox

# With dataclass (clean)
@dataclass
class OCRWord:
    text: str
    confidence: float
    bbox: tuple
```

## Conditional Imports

Handle missing dependencies gracefully:

```python
try:
    from PIL import Image
    PIL_AVAILABLE = True
except ImportError:
    PIL_AVAILABLE = False
    Image = None
```

This allows:
- Importing module without all dependencies
- Testing without heavy libraries
- Clear error messages when needed
