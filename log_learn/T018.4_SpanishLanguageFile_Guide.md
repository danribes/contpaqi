# T018.4 - Spanish Language File Guide

## Overview

This guide covers the creation of a comprehensive Spanish language file for the ContPAQi AI Bridge desktop application, ensuring complete parity with the English translation while following Mexican Spanish conventions.

---

## Spanish Translation Best Practices

### Formal vs. Informal Register

For business applications, use formal Spanish (usted):

```json
// Correct (Formal - Usted)
{
  "confirmation": {
    "message": "¿Está seguro?",
    "exitWithoutSaving": "¿Salir sin guardar los cambios?"
  }
}

// Avoid (Informal - Tú)
{
  "confirmation": {
    "message": "¿Estás seguro?",
    "exitWithoutSaving": "¿Salir sin guardar tus cambios?"
  }
}
```

### Mexican Spanish vs. Castilian Spanish

Use Mexican Spanish variants for this application:

| English | Mexican Spanish | Castilian Spanish |
|---------|-----------------|-------------------|
| Computer | Computadora | Ordenador |
| Upload | Subir | Cargar |
| Delete | Eliminar | Borrar |
| Driver | Controlador | Driver |
| Email | Correo electrónico | Email |

---

## Special Characters

### Accents (Tildes)

Spanish requires proper accent marks:

| Letter | Example |
|--------|---------|
| á | Está, Página, Automáticamente |
| é | También, Número, Versión |
| í | Información, Válido, Día |
| ó | Configuración, Conexión, Acción |
| ú | Menú, Único |
| ñ | Año, Compañía, Señal |
| ü | Bilingüe, Pingüino |

### Opening Punctuation

Spanish uses opening question marks and exclamation points:

```json
{
  "confirmation": {
    "message": "¿Está seguro?",
    "warning": "¡Advertencia!"
  }
}
```

---

## Translation Patterns

### Status Messages

End ongoing actions with ellipsis:

```json
{
  "status": {
    "starting": "Iniciando...",
    "processing": "Procesando...",
    "connecting": "Conectando..."
  }
}
```

Completed states have no punctuation:

```json
{
  "status": {
    "ready": "Listo",
    "completed": "Completado",
    "failed": "Fallido"
  }
}
```

### Action Buttons

Capitalize first letter, use infinitive or imperative:

```json
{
  "actions": {
    "submit": "Enviar",
    "cancel": "Cancelar",
    "save": "Guardar",
    "delete": "Eliminar",
    "confirm": "Confirmar"
  }
}
```

### Error Messages

Be user-friendly and suggest solutions:

```json
{
  "errors": {
    "network": "Error de red. Por favor verifique su conexión.",
    "timeout": "La solicitud ha expirado. Por favor intente de nuevo.",
    "serverError": "Error del servidor. Por favor intente más tarde."
  }
}
```

### Validation Messages

Clear, specific feedback:

```json
{
  "validation": {
    "required": "Este campo es obligatorio",
    "invalidRfc": "Formato de RFC inválido",
    "ivaError": "El IVA no es igual al 16% del subtotal"
  }
}
```

---

## Key Parity with English

### Structure Matching

Both files must have identical structure:

```json
// en.json
{
  "invoice": {
    "form": {
      "title": "Invoice Details",
      "rfcEmisor": "RFC Emisor"
    }
  }
}

// es.json
{
  "invoice": {
    "form": {
      "title": "Detalles de la Factura",
      "rfcEmisor": "RFC Emisor"
    }
  }
}
```

### Interpolation Variables

Placeholders must match exactly:

```json
// en.json
{
  "license": {
    "daysRemaining": "{{days}} days remaining",
    "activationsUsed": "{{used}} of {{max}} activations used"
  }
}

// es.json
{
  "license": {
    "daysRemaining": "{{days}} días restantes",
    "activationsUsed": "{{used}} de {{max}} activaciones usadas"
  }
}
```

---

## Technical Terms

### Terms to Keep in English

| Term | Reason |
|------|--------|
| Docker | Brand name |
| PDF | Universal acronym |
| API | Technical standard |
| RFC | Mexican standard (Registro Federal de Contribuyentes) |
| IVA | Spanish acronym (Impuesto al Valor Agregado) |

### Terms to Translate

| English | Spanish |
|---------|---------|
| Settings | Configuración |
| Dashboard | Panel de Control |
| Batch Processing | Procesamiento por Lotes |
| License | Licencia |
| Keyboard Shortcuts | Atajos de Teclado |

---

## Testing Spanish Translations

### Key Parity Test

```typescript
test('all en.json keys exist in es.json', () => {
  const esKeys = new Set(getAllKeys(esTranslations));
  const enKeys = getAllKeys(enTranslations);

  const missingKeys = enKeys.filter(key => !esKeys.has(key));
  expect(missingKeys).toEqual([]);
});
```

### Interpolation Test

```typescript
test('same interpolation placeholders', () => {
  for (const key of getAllKeys(enTranslations)) {
    const enValue = getValue(enTranslations, key);
    const esValue = getValue(esTranslations, key);

    const enPlaceholders = enValue.match(/\{\{[\w]+\}\}/g) || [];
    const esPlaceholders = esValue.match(/\{\{[\w]+\}\}/g) || [];

    expect(esPlaceholders.sort()).toEqual(enPlaceholders.sort());
  }
});
```

### Spanish Character Test

```typescript
test('contains Spanish characters', () => {
  const content = JSON.stringify(esTranslations);
  expect(/[áéíóúñüÁÉÍÓÚÑÜ¿¡]/.test(content)).toBe(true);
});
```

---

## Common Translation Mistakes

### 1. False Friends

| English | Wrong Spanish | Correct Spanish |
|---------|---------------|-----------------|
| Actually | Actualmente (currently) | En realidad |
| Library | Librería (bookstore) | Biblioteca |
| Success | Suceso (event) | Éxito |

### 2. Gender Agreement

```json
// Correct
{
  "license": {
    "active": "Activa",      // Feminine (la licencia)
    "expired": "Expirada"    // Feminine
  },
  "status": {
    "completed": "Completado" // Masculine (el proceso)
  }
}
```

### 3. Word Order

```json
// English: "5 files selected"
// Spanish: "5 archivos seleccionados" (adjective after noun)
{
  "batch": {
    "filesSelected": "{{count}} archivos seleccionados"
  }
}
```

---

## Using Translations in React

### Basic Usage

```tsx
import { useTranslation } from 'react-i18next';

function StatusIndicator({ status }) {
  const { t, i18n } = useTranslation();

  return (
    <div>
      <span>{t(`status.${status}`)}</span>
      <button onClick={() => i18n.changeLanguage('es')}>
        Español
      </button>
    </div>
  );
}
```

### With Interpolation

```tsx
function LicenseInfo({ days }) {
  const { t } = useTranslation();

  return (
    <p>{t('license.daysRemaining', { days })}</p>
    // Output: "30 días restantes"
  );
}
```

---

## Quality Assurance Checklist

Before releasing Spanish translations:

- [ ] All keys from en.json exist in es.json
- [ ] All interpolation placeholders match
- [ ] Proper accents on all words
- [ ] Opening ¿ and ¡ where needed
- [ ] Formal register (usted) used consistently
- [ ] Mexican Spanish variants preferred
- [ ] No machine translation artifacts
- [ ] Technical terms properly handled
- [ ] Gender agreement correct
- [ ] Word order natural in Spanish

---

## References

- [Real Academia Española (RAE)](https://www.rae.es/)
- [Fundéu BBVA - Spanish Language Guidance](https://www.fundeu.es/)
- [Microsoft Spanish Style Guide](https://www.microsoft.com/en-us/language)
- [i18next Interpolation](https://www.i18next.com/translation-function/interpolation)
