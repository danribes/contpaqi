# T006.4 Row Extraction - Test Log

## Test Execution Summary
**Date**: 2025-12-07
**Tests**: 15 | **Passed**: 15 | **Failed**: 0

## Test File
`tests/test_task006_4_tatr_row_extraction.py`

## Test Classes

| Class | Tests | Description |
|-------|-------|-------------|
| TestGetTableRowsBasic | 2 | Returns list, accepts threshold |
| TestGetTableRowsWithMocks | 5 | Filters, sorts, includes index |
| TestGetTableBoundsBasic | 2 | Returns dict or None |
| TestGetTableBoundsWithMocks | 5 | Filters tables, highest conf |
| TestGetTableRowsDictStructure | 3 | bbox, confidence, index types |
| TestThresholdPropagation | 2 | Threshold passed to detect |
| TestEmptyDetections | 2 | Handles empty detection list |

## Key Test Patterns

```python
def test_get_table_rows_sorts_by_y_coordinate(self):
    detections = [
        TableDetection(label="table row", bbox=(10, 200, 790, 230)),
        TableDetection(label="table row", bbox=(10, 50, 790, 80)),
    ]
    model.detect = Mock(return_value=detections)
    result = model.get_table_rows(Mock())
    assert result[0]['bbox'][1] == 50   # First (top)
    assert result[1]['bbox'][1] == 200  # Second (bottom)

def test_get_table_bounds_returns_highest_confidence(self):
    detections = [
        TableDetection(label="table", confidence=0.70, bbox=(...)),
        TableDetection(label="table", confidence=0.95, bbox=(...)),
    ]
    result = model.get_table_bounds(Mock())
    assert result['confidence'] == 0.95
```

## Execution Output
```
tests/test_task006_4_tatr_row_extraction.py ............... [100%]
============================== 15 passed in 0.06s ==============================
```
